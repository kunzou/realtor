<div *ngIf="property">
    <div class="p-3">
        <div>
            <mat-checkbox color="primary" [(ngModel)]="property.hide">Hide from list</mat-checkbox>
        </div>

        <mat-form-field>
            <mat-label>House Type</mat-label>
            <mat-select [(ngModel)]="property.propertyType" name="propertyType">
                <mat-option *ngFor="let propertyType of propertyTypes" [value]="propertyType">
                    {{propertyType | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select [(ngModel)]="property.propertyStatus" name="propertyStatus">
                <mat-option *ngFor="let propertyStatus of propertyStatuses" [value]="propertyStatus">
                    {{propertyStatus | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Source</mat-label>
            <mat-select [(ngModel)]="property.source" name="source">
                <mat-option *ngFor="let source of sources" [value]="source">
                    {{source}}
                </mat-option>
            </mat-select>
        </mat-form-field>   
        
        <mat-form-field>
            <mat-label>Style</mat-label>
            <mat-select [(ngModel)]="property.propertyStyle" name="propertyStyle">
                <mat-option *ngFor="let propertyStyle of propertyStyles" [value]="propertyStyle">
                    {{propertyStyle | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>        
        
        <mat-form-field>
            <mat-label>Usage</mat-label>
            <mat-select [(ngModel)]="property.usage" name="usage">
                <mat-option *ngFor="let usage of usages" [value]="usage">
                    {{usage | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Garage</mat-label>
            <mat-select [(ngModel)]="property.garage" name="garage">
                <mat-option *ngFor="let garage of garageTypes" [value]="garage">
                    {{garage | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>          

        <mat-form-field>
            <mat-label>性质</mat-label>
            <mat-select [(ngModel)]="property.holdType" name="holdType">
                <mat-option *ngFor="let holdType of holdTypes" [value]="holdType">
                    {{holdType | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>        
        
        <mat-form-field>
            <input matInput placeholder="Garage Size" [(ngModel)]="property.garageSize" name="garageSize">
        </mat-form-field>        

        <mat-form-field>
            <input matInput placeholder="Property Address" [(ngModel)]="property.address" name="address">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Built in" [(ngModel)]="property.yearBuilt" name="yearBuilt">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Size" [(ngModel)]="property.area" name="area">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Number of Rooms" [(ngModel)]="property.numberOfRooms" name="numberOfRooms">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Number of Washroom" [(ngModel)]="property.numberOfWashrooms"
                name="numberOfWashRooms">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Ask price" [(ngModel)]="property.askingPrice" name="askingPrice">
            <span matPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Sold price" [(ngModel)]="property.finalPrice" name="finalPrice">
            <span matPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Neighborhood" [(ngModel)]="property.neighborhood" name="neighborhood">
        </mat-form-field>

        <mat-form-field>
            <mat-label>Basement</mat-label>
            <mat-select [(ngModel)]="property.basementCondition" name="basementCondition">
                <mat-option *ngFor="let basementCondition of basementConditions" [value]="basementCondition">
                    {{basementCondition | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>    
        
        <mat-form-field>
            <mat-label>Upgrades</mat-label>
            <mat-select multiple [(ngModel)]="property.upgrades">
              <mat-option *ngFor="let upgrade of upgrades" [value]="upgrade">{{upgrade | translate}}</mat-option>
            </mat-select>
        </mat-form-field>       

        <mat-form-field>
            <mat-label>留下的东西</mat-label>
            <mat-select multiple [(ngModel)]="property.remaining">
              <mat-option *ngFor="let remaining of remainings" [value]="remaining">{{remaining | translate}}</mat-option>
            </mat-select>
        </mat-form-field>               

        <br>
        <mat-form-field>
            <input matInput [matDatepicker]="picker" placeholder="On Market Since" [(ngModel)]="property.onMarketSince">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Comments on Map" [(ngModel)]="property.aboutPageComment"
                name="aboutPageComment">
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="YouTube link" [(ngModel)]="property.youtubeLink" name="youtubeLink">
        </mat-form-field>
        <br>
        <p>Feature:</p>
        <mat-form-field>
            <mat-label>Feature</mat-label>
            <mat-select [(ngModel)]="selectedFeature" name="selectedFeature">
                <mat-option *ngFor="let feature of features" [value]="feature">
                    {{feature | translate}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        
        <mat-form-field>
            <mat-label>Year</mat-label>
            <input matInput placeholder="Feature Year" [(ngModel)]="featureYear" name="featureYear">
        </mat-form-field>
        
        <button mat-raised-button color="primary" (click)="addFeature()">Add</button>

        <br>
        <tr *ngFor="let feature of property.features">
            {{feature.year}} {{feature.description | translate}}
            <button mat-button color="warn" (click)="deleteFeature(feature)">
                <mat-icon>delete_forever</mat-icon>
            </button>
        </tr>

        <section class="language-section">
            <label class="language-section-margin">Language</label>
            <mat-radio-group [(ngModel)]="language">
                <mat-radio-button class="language-section-margin" value="zh">Chinese</mat-radio-button>
                <mat-radio-button class="language-section-margin" value="en">English</mat-radio-button>
            </mat-radio-group>
        </section>

        <div *ngIf="language === 'zh'">
            <mat-form-field>
                <input matInput placeholder="Tag" [(ngModel)]="property.tag.chinese" name="tag">
            </mat-form-field>
    
            <ckeditor [(ngModel)]="property.description.chinese"></ckeditor>
        </div>
        <div *ngIf="language === 'en'">
            <mat-form-field>
                <input matInput placeholder="Tag" [(ngModel)]="property.tag.english" name="tag">
            </mat-form-field>            
            <ckeditor [(ngModel)]="property.description.english"></ckeditor>
        </div>

        <div style="text-align:center; margin-top: 10px; ">
            <mat-card style="margin-top:10px; ">
                <mat-card-content>
                    <ul>
                        <li *ngFor="let file of files">
                            <mat-progress-bar [value]="file.progress"></mat-progress-bar>
                            <span id="file-label">
                            </span>
                        </li>
                    </ul>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color="warn" (click)="uploadPrimary()">
                        <mat-icon>file_upload</mat-icon>
                        Upload primary photo
                    </button>
                    <button mat-button (click)="uploadAdditional()">
                        <mat-icon>file_upload</mat-icon>
                        Upload additional photos
                    </button></mat-card-actions>
                <mat-card-content>
                    <div style="text-align: center;" *ngIf="property.primaryImage">
                        <img mat-card-image src="{{primaryImage.mediumLink}}" alt="">
                    </div>
                    <div class="container">
                        <div class="row">
                            <div class="col-sm m-1" *ngFor="let image of additionalImages">
                                <div class="delete">
                                    <button mat-button color="warn" (click)="deleteImage(image)">
                                        <mat-icon>delete_forever</mat-icon>
                                    </button>
                                </div>
                                <img mat-card-image src="{{image.mediumLink}}" alt="">
                            </div>
                        </div>
                    </div>
                </mat-card-content>


            </mat-card>

            <input type="file" #fileUpload id="fileUpload" name="fileUpload" multiple="multiple" accept="image/*"
                style="display:none;" />
        </div>


        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="save()">Save</button>
            <button mat-raised-button color="secondary" (click)="goBack()">Go back</button>
            <button mat-raised-button color="secondary" (click)="delete()">Delete</button>
        </mat-card-actions>
    </div>
</div>